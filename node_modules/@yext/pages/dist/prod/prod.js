import runSubprocess from "../util/runSubprocess.js";
const handler = async ({ noBuild, noRender, scope }) => {
  const command = "yext pages";
  if (!noBuild) {
    await runSubprocess(command, ["build", scope ? `--scope ${scope}` : ""]);
  }
  if (!noRender) {
    await runSubprocess(command, ["render", scope ? `--scope ${scope}` : ""]);
  }
  await runSubprocess(command, ["serve"]);
};
const prodCommand = (program) => {
  program.command("prod").description("Runs a custom local production server").option("--noBuild", "Disable build step").option("--noRender", "Disable render step").option(
    "--scope  <string>",
    "The subfolder to scope the served templates from"
  ).action(handler);
};
export {
  prodCommand
};
