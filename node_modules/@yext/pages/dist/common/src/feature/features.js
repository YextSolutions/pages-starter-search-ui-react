import { convertTemplateConfigToStreamConfig } from "./stream.js";
const convertTemplateConfigInternalToFeaturesConfig = (config) => {
  const featureConfig = convertTemplateConfigToFeatureConfig(config);
  const streamConfig = convertTemplateConfigToStreamConfig(config);
  return {
    features: [featureConfig],
    ...streamConfig ? { streams: [streamConfig] } : ""
  };
};
const isStaticTemplateConfig = (config) => {
  const streamConfig = config.stream || null;
  return !config.streamId && (!streamConfig || !streamConfig.$id);
};
const convertTemplateConfigToFeatureConfig = (config) => {
  const streamConfig = config.stream || null;
  const featureConfigBase = {
    name: config.name,
    streamId: streamConfig?.$id ?? config.streamId,
    templateType: "JS",
    alternateLanguageFields: config.alternateLanguageFields
  };
  let featureConfig;
  if (isStaticTemplateConfig(config)) {
    featureConfig = {
      ...featureConfigBase,
      staticPage: {
        locales: config.locales
      }
    };
  } else {
    featureConfig = {
      ...featureConfigBase,
      entityPageSet: {}
    };
  }
  return featureConfig;
};
export {
  convertTemplateConfigInternalToFeaturesConfig,
  convertTemplateConfigToFeatureConfig,
  isStaticTemplateConfig
};
