import { isStaticTemplateConfig } from "../../../common/src/feature/features.js";
import { findTemplateModuleInternal } from "./findTemplateModuleInternal.js";
import { getLocalDataForEntityOrStaticPage } from "./getLocalData.js";
async function findMatchingStaticTemplate(vite, slug, templateFilepaths, locale) {
  return findTemplateModuleInternal(
    vite,
    async (t) => {
      if (!isStaticTemplateConfig(t.config)) {
        return false;
      }
      try {
        const document = await getLocalDataForEntityOrStaticPage({
          entityId: "",
          locale,
          featureName: t.config.name
        });
        return slug === t.getPath({ document });
      } catch {
        return false;
      }
    },
    templateFilepaths
  );
}
export {
  findMatchingStaticTemplate as default
};
